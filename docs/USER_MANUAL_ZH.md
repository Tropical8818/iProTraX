# ProTracker 用户手册

**版本 7.0.0**

---

## 目录

1. [简介](#简介)
2. [快速开始](#快速开始)
   - [系统要求](#系统要求)
   - [登录](#登录)
   - [注册](#注册)
3. [仪表盘概览](#仪表盘概览)
   - [导航](#导航)
   - [产品线选择](#产品线选择)
   - [订单表格](#订单表格)
4. [操作视图](#操作视图)
   - [条形码扫描](#条形码扫描)
   - [快速状态更新](#快速状态更新)
   - [智能评论](#智能评论)
5. [批量操作](#批量操作)
   - [P 模式](#p-模式)
   - [N/A 模式](#na-模式)
   - [Hold 模式](#hold-模式)
   - [QN 模式](#qn-模式)
   - [WIP 模式](#wip-模式)
   - [完成模式](#完成模式)
   - [擦除模式](#擦除模式)
   - [超级编辑模式](#超级编辑模式)
6. [导入订单](#导入订单)
7. [AI 助手](#ai-助手)
8. [设置](#设置)
   - [产品线配置](#产品线配置)
   - [AI 设置](#ai-设置)
   - [用户管理](#用户管理)
   - [数据管理](#数据管理)
9. [用户角色与权限](#用户角色与权限)
10. [常见问题](#常见问题)

---

## 简介

**ProTracker** 是一款 AI 驱动的生产跟踪系统，专为制造业环境设计。它可以帮助您：

- 跟踪工单在多个生产步骤中的进度
- 通过桌面或移动设备实时更新订单状态
- 使用 AI 助手分析生产数据
- 从单一界面管理多条产品线

---

## 快速开始

### 系统要求

- 现代网页浏览器（Chrome、Firefox、Safari、Edge）
- 网络连接或可访问本地服务器
- 移动端：iOS Safari 或 Android Chrome

### 登录

1. 访问 ProTracker 网址（例如：`http://localhost:3001`）
2. 输入您的 **用户名** 和 **密码**
3. 点击 **登录**

> **提示**：如果没有账户，请联系管理员或使用注册链接。

### 注册

1. 点击"没有账户？创建一个"
2. 输入您想要的用户名和密码
3. 提交表单
4. 等待管理员审批（新账户需要审批）

---

## 仪表盘概览

登录后，您将看到包含所有订单的主仪表盘。

### 导航

| 按钮 | 描述 |
|------|------|
| **首页** | 带有订单表格的主仪表盘 |
| **操作** | 为生产线工人优化的简化视图 |
| **设置** | 配置产品、用户和系统设置 |

### 产品线选择

- 点击页眉中的 **产品下拉菜单** 切换产品线
- 每条产品线都有独立的订单、步骤和配置
- **列宽调整**：您可以拖动列标题的边缘来调整宽度，系统会自动记住您的设置。

### 订单表格

主表格显示所有工单，包括：

- **详细列**：订单号、客户、交期、数量等
- **步骤列**：生产步骤（如：裁切、组装、质检）
- **状态指示**：
  - 📘 **P** = 计划中/待处理
  - ⬜ **N/A** = 不适用 (如果在最后一步标记为 N/A，则视为已完成)
  - 🟠 **Hold** = 暂停
  - 🔴 **QN** = 质量通知（问题）
  - 🟡 **WIP** = 进行中
  - ✅ **日期** = 已完成（显示完成日期）

---

---

## 操作视图

**操作视图** 针对使用平板或手机的生产线工人进行了优化。

### 条形码扫描

1. 点击 **扫描** 按钮（条形码图标）
2. 将摄像头对准工单号条形码
3. 系统将自动定位并显示该订单

### 快速状态更新

在操作视图中，您可以快速更新订单状态：

1. 找到您的订单（通过扫描或滚动）
2. 点击步骤单元格
3. 从弹出菜单中选择新状态：
   - **完成** - 标记为完成并添加时间戳
   - **WIP** - 进行中
   - **Hold** - 暂停
   - **QN** - 质量通知
   - **N/A** - 不适用

### 智能评论 (Smart Comments)

直接针对特定步骤进行协作，更快地解决问题。

1.  **点击评论图标**：附在操作视图中的任何步骤上。
2.  **添加评论**：输入您的消息。
3.  **选择类别**：标记评论以帮助 AI 分析问题。
    *   `General` (常规)：普通讨论。
    *   `QN` (质量)：质量问题、缺陷。
    *   `Material` (物料)：缺件、物料错误。
    *   `Machine` (设备)：设备故障或维护。
    *   `Hold` (暂停)：流程阻塞。
4.  **发送**：评论将记录您的用户 ID 和时间戳。

---

## 电子看板 (Kiosk Mode)

**电子看板**（Shop Floor Monitor）专门用于生产现场的显示终端（平板或大屏），提供高对比度的全屏视图。

### 访问方式
- **专用账户**：建议创建一个角色为 `kiosk` 的账户。该账户登录后会自动锁定在看板页面，无法访问后台管理界面。
- **长效登录**：Kiosk 账户的登录有效期长达 **30 天**，适合长期开启的显示终端。

### 功能特点
- **自动刷新**：每 60 秒自动更新一次生产数据。
- **自动滚动**：当订单较多时，系统会自动平滑滚动以循环展示所有工单。
- **控制台锁定**：
    - 点击左侧图标可以尝试进入管理模式。
    - **安全解锁**：需要输入当前登录账户的**登录密码**才能解锁控制台以切换产品线。
    - 解锁后，控制台会保持开启状态，再次点击锁图标可重新锁定。

---

---

## 批量操作

对于主管和管理员，批量操作允许快速更新多个单元格。

### P 模式

- 点击 **P** 按钮进入 P 模式
- 点击任意步骤单元格切换"P"（计划中）状态
- 再次点击 **P** 退出

### N/A 模式

- 为跳过某些步骤的订单标记"不适用"

### Hold 模式

- 当等待材料或审批时将订单暂停

### QN 模式

- 标记需要注意的质量问题步骤

### WIP 模式

- 表示工作正在积极进行中

### 完成模式

- 点击以当前日期/时间戳标记步骤为完成

### 擦除模式

- 仅限管理员 或主管需要密码
- 清除单元格中的任何状态
- 请谨慎使用！

### 超级编辑模式

*（V6.3.0 新功能 - 仅限管理员/主管）*

- **功能**: 直接修改工单详情列（如 WO ID, PN, 描述等），无需重新导入 Excel。
- **操作**:
    1. 点击 WO ID 列左上角的 **锁图标** 🔒。
    2. 图标变为解锁状态 🔓，并且表格边框变色提示进入编辑模式。
    3. 点击任意详情单元格（WO ID, PN, Priority, Due Date 等）进行修改。
    4. 输入新内容并回车，更改即时保存。
- **限制**: **ECD** 列为系统自动计算，不可修改。
- **注意**: 修改即时生效，请谨慎操作。无需提交按钮。

---

## 日志管理

### 操作日志
系统会记录对订单所做的每一次更改。您可以通过点击仪表盘页眉中的 **历史记录 (History)** 图标来查看这些日志。

### 导出与清除（管理员/主管）
在操作日志弹窗中：
1.  **导出 CSV**: 点击绿色的 **CSV** 按钮，将完整日志下载为 Excel 可分析的表格文件。
2.  **清除日志**:（仅限管理员）点击红色的 **Clear** 按钮永久删除所有历史记录。建议在开始新的生产周期时使用。

---

## 导入订单

### Excel 导入（管理员/主管）

1. 点击页眉中的 **导入** 按钮
2. 选择您的 Excel 文件（.xlsx 或 .xls）
3. 查看导入预览
4. 点击 **导入** 添加新订单

> **注意**：现有的工单号会自动跳过，以防止重复。

---

## AI 助手

ProTracker 包含一个智能悬浮 AI 助手，可以帮助您：

- 分析生产风险和延误
- 生成每日晨会简报
- 自动跳转到特定工单
- 回答关于生产状态的问题

### 使用 AI

1. 点击 **聊天图标** 💬（屏幕右下角）
2. 输入您的问题，或使用 **快捷工具**（仅限管理员/主管）：
    - **风险分析 (Analyze Risks)**：识别可能有延误风险的订单。
    - **晨会简报 (Morning Report)**：生成每日站会总结。
    - **类别诊断 (Category Diagnosis)**：询问“最高的质量问题是什么？”以分析标记为 `QN` 的评论。

### AI 类别分析 🧠
AI 自动按类别聚合评论以提供深入见解：
*   **瓶颈检测**：“为什么装配有 5 个订单暂停？”（分析 `Hold` 评论）
*   **维护警报**：“显示最近的机器问题。”（分析 `Machine` 评论）
*   **质量趋势**：“总结上周的 QN 报告。”（分析 `QN` 评论）

### 智能跳转 (Smart Navigation) 🚀
您可以直接告诉 AI 带您去查看某个工单：
*   "打开 WO-1234"
*   "看看订单 5555"

**结果**：系统会自动为您打开该订单的 **操作视图**。

### 示例问题

- "哪些订单落后于计划？"
- "绕线步骤的平均时间是多少？"
- "显示 QN 状态的订单"
- "总结今天的生产情况"

---

## 设置

从导航栏访问设置。

### 产品线配置

*（仅限管理员）*

- **添加产品线**：创建新的生产线
- **编辑步骤**：定义生产步骤和持续时间
- **详细列**：配置订单信息字段
- **月度目标**：设置生产目标
- **ECD 设置**：配置交货估算是否包含周末

### AI 设置

*（仅限管理员）*

- **OpenAI API 密钥**：输入您的 OpenAI API 密钥以启用 AI 功能
- **AI 模型**：在 GPT-4o、GPT-4o Mini 或 GPT-3.5 Turbo 之间选择
- **自定义指令**：为 AI 添加产品特定知识

### 用户管理

*（管理员/主管）*

导航至 **设置 → 用户管理** 可以：

- 查看所有用户
- 审批待处理的注册
- 重置密码
- 启用/禁用账户
- 删除用户（仅限管理员）

### 数据管理

*（仅限管理员）*

- **导出 CSV**：下载所有生产数据
- **清理**：删除超过 2 年的数据

---

## 用户角色与权限

| 角色 | 权限 |
|------|------|
| **用户** | 查看订单，在操作视图中更新状态 |
| **看板 (Kiosk)** | 仅限查看电子看板，30天长效登录，无法访问后台 |
| **主管** | 所有用户权限 + 导入订单、批量操作、管理普通用户 |
| **管理员** | 所有权限 + 设置、用户管理、数据管理 |

---

## 常见问题

### 常见问题解答

**问：页面一直刷新**
- 清除浏览器缓存和 Cookie
- 尝试使用其他浏览器
- 联系管理员重启服务器

**问：无法登录**
- 检查用户名和密码
- 确保您的账户已获批准
- 联系管理员

**问：订单不显示**
- 选择正确的产品线
- 检查是否启用了"显示已完成"
- 刷新页面

**问：AI 没有响应**
- 在设置中验证 OpenAI API 密钥是否已配置
- 检查您的 API 密钥余额/配额

---

## 技术支持

如需技术支持，请联系您的系统管理员。

**ProTracker v6.3.0** - AI 驱动的生产跟踪器
