# ProTracker - AI-Powered Production Tracker

[🇺🇸 English](README.md) | [🇨🇳 简体中文](README_ZH.md)

> 🤖 **V6.1.3 新功能**: 超级管理员权限分级、员工工号隐私保护、增强的用户管理界面。

## 🚀 快速开始

### 1. 安装依赖
```bash
npm install
```

### 2. 配置环境变量
在 `.env` 文件中添加你的 OpenAI API Key:
```
OPENAI_API_KEY=sk-your-api-key-here
```

### 3. 启动开发服务器
```bash
npm run dev
```

访问 http://localhost:3000

---

## ✨ AI 功能

### 🖥️ 电子看板 (Kiosk Mode v6.1.0)
专为车间大屏优化的显示模式：
- **显示密度切换**：支持“常规”和“紧凑”两种视图，单屏可显示多达 15 个工单。
- **角色锁定**：专用的 `kiosk` 角色，登录后自动锁定在看板界面，严防误操作。
- **30天长效登录**：大幅延长会话有效期，减少现场重新登录的频率。
- **账户密码解锁**：使用当前账户登录密码解锁控制台，更安全、更统一。
- **智能排序**：基于交期、优先级和“计划 (P)”状态的自动化科学排产顺序。

### 💬 AI 聊天助手 (v6.0.0)
点击右下角的聊天按钮，即可与 AI 助手对话：

- **智能跳转**："打开工单 WO-123" -> *自动跳转到操作视图*。
- **晨会报告**："生成今天的晨会总结报告" -> *一键导出生产摘要*。
- **异常扫描**："哪些工单有延期风险？" -> *根据 ECD 自动分析风险*。

---
### 🔮 未来功能 (规划中)
- 智能 ECD 预测
- 自动异常警报
- 智能 Excel 导入列识别
- 生产报告自动生成

---

## 📁 项目结构

```
src/
├── app/
│   ├── api/
│   │   └── ai/
│   │       └── chat/route.ts   # AI 聊天 API
│   └── dashboard/
│       └── page.tsx            # 集成 AI Chat Panel
├── components/
│   └── AIChatPanel.tsx         # AI 聊天界面组件
└── lib/
    └── ai/
        ├── client.ts           # OpenAI 客户端
        ├── context.ts          # 生产数据上下文构建
        └── prompts.ts          # AI 系统提示词
```

---

## 🔒 安全注意

- 不要将 API Key 提交到代码库
- 建议在生产环境使用环境变量或密钥管理服务
- AI 功能仅对已登录用户可用

---

## 📝 更新日志

### V6.1.0
- ✨ **专业电子看板系统**：针对车间大屏优化的 Shop Floor Monitor。
- ✨ **布局优化**：支持双列紧凑布局，信息承载量提升 300%。
- ✨ **安全加固**：账户密码解锁机制，废除旧版 PIN 码。
- ✨ **会话延长**：Kiosk 角色支持 30 天自动保持在线。
- ✨ **排产排序**：新增基于 "P" (Planned) 状态的置顶逻辑。

### V6.0.0
- ✨ **悬浮 AI 助手**：全新的 UI 设计与常驻对话窗口。
- ✨ **智能导航**：支持通过对话跳转至特定订单。
- ✨ **日志导出**：新增 CSV 导出与日志清理功能。

### V5.0.0
- ✨ 新增 AI 聊天助手
- ✨ 集成 OpenAI GPT-4o-mini
- ✨ 生产数据智能分析
- 🔧 基于 V4 全部功能

### V4.0.0
- 多产品线支持
- 权限管理系统
- 批量操作
- 操作日志

---

